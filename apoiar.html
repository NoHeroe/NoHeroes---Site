<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apoio Vitalista | NoHeroes</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/scrollreveal"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    .spinner-border {
      display: inline-block;
      width: 2rem;
      height: 2rem;
      vertical-align: text-bottom;
      border: 0.25em solid currentColor;
      border-right-color: transparent;
      border-radius: 50%;
      animation: spinner-border .75s linear infinite;
    }

    @keyframes spinner-border {
      to { transform: rotate(360deg); }
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: #0a0a0a;
      color: #e5e5e5;
    }

    h1, h2 {
      font-family: 'Playfair Display', serif;
    }

    html {
      scroll-behavior: smooth;
    }

    .logo-glow {
      animation: glow 2s infinite ease-in-out;
    }

    @keyframes glow {
      0%, 100% { filter: drop-shadow(0 0 8px #8f4fff); }
      50% { filter: drop-shadow(0 0 16px #8f4fff); }
    }
  </style>
</head>
<body class="text-center p-6">
  <!-- LOGO -->
  <a href="index.html">
    <img src="assets/images/noheroes logo.png" alt="Logo NoHeroes" class="mx-auto w-40 logo-glow">
  </a>

  <!-- FRASE IMPACTO -->
  <h2 class="text-xl italic mt-6 opacity-70">“Até mesmo os mundos mais sombrios precisam de luz para existir.”</h2>
  <p class="mt-4 max-w-xl mx-auto text-base">Você está prestes a alimentar não um projeto, mas um universo inteiro. Criado do zero, com alma e suor, por um criador que quer mudar vidas com arte, anime e verdade. Aqui, cada contribuição fortalece uma ideia que já é maior do que eu. <strong>Ajude a manter Caelum vivo. Torne-se um Vitalista, ou uma das sombras de Caelum.</strong></p>

  <!-- BOTÕES -->
  <div class="mt-12 space-y-4">
    <!-- Contribuir com Pix -->
    <button onclick="openPixModal()" class="bg-[#8f4fff] text-black px-6 py-3 rounded-lg font-bold hover:scale-105 transition">
      Contribuir com Pix
    </button>
    <!-- Quero ajudar de outras formas -->
    <button onclick="openForm('ajudarOutrasFormas')" class="bg-[#1c1c1c] text-white px-6 py-3 rounded-lg border border-[#555] hover:border-[#8f4fff]">
      Quero ajudar de outras formas
    </button>
    <!-- Quero fazer uma parceria -->
    <button onclick="openForm('fazerParceria')" class="bg-[#1c1c1c] text-white px-6 py-3 rounded-lg border border-[#555] hover:border-[#8f4fff]">
      Quero fazer uma parceria
    </button>
    <!-- Quero investir no projeto -->
    <button onclick="openForm('investirProjeto')" class="bg-[#1c1c1c] text-white px-6 py-3 rounded-lg border border-[#555] hover:border-[#8f4fff]">
      Quero investir no projeto
    </button>
    <!-- Preciso de apoio no meu projeto -->
    <button onclick="openForm('apoioProjeto')" class="bg-[#1c1c1c] text-white px-6 py-3 rounded-lg border border-[#555] hover:border-[#8f4fff]">
      Preciso de apoio no meu projeto
    </button>
    <!-- Siga as sombras -->
    <button onclick="openSocials()" class="bg-[#333] text-white px-6 py-3 rounded-lg border border-[#666] hover:border-[#8f4fff]">
      Siga as Sombras
    </button>
  </div>

  <!-- MODALS -->
  <!-- Modal Pix -->
  <div id="pixModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center">
    <div class="bg-[#1c1c1c] p-6 rounded-lg max-w-lg w-full text-left">
      <h3 class="text-2xl font-bold text-[#8f4fff] mb-4">Contribuir com Pix</h3>

      <!-- Formulário para inserir o valor -->
      <div id="pixFormContainer">
        <form id="pixForm" onsubmit="generateQRCode(event)">
          <label for="pixValor" class="block mb-2 text-sm">Digite o valor da contribuição (R$):</label>
          <input type="number" id="pixValor" name="valor" step="0.01" min="1" required class="w-full p-2 mb-4 bg-[#333] text-white rounded">
          <button type="submit" class="bg-[#8f4fff] text-black px-4 py-2 mt-4 rounded hover:bg-[#39ff14]">
            Gerar QR Code Pix
          </button>
        </form>
      </div>

      <!-- Spinner enquanto o QR Code está sendo gerado -->
      <div id="loadingSpinner" class="hidden text-center">
        <div class="spinner-border text-[#8f4fff]" role="status">
          <span class="sr-only">Gerando QR Code...</span>
        </div>
      </div>

      <!-- QR Code gerado -->
      <div id="pixQRCodeContainer" class="hidden text-center">
        <h4 class="text-lg text-[#8f4fff] mb-4">Escaneie o QR Code</h4>
        <div id="pixQRCode" class="mb-4 mx-auto"></div>
        <button onclick="confirmPayment()" class="bg-[#8f4fff] text-black px-4 py-2 rounded hover:bg-[#39ff14]">
          Já efetuei o pagamento
        </button>
      </div>

      <!-- Mensagem de agradecimento -->
      <div id="thankYouContainer" class="hidden text-center">
        <h4 class="text-lg text-[#8f4fff] mb-4">Obrigado!</h4>
        <p class="text-white italic mb-4">
          “As sombras de Caelum consumiram sua oferenda com prazer. Agora você caminha guardado pela benção de um Guardião Divino. Obrigado por sua coragem, Vitalista.”
        </p>
        <button onclick="resetPixPage()" class="bg-[#8f4fff] text-black px-4 py-2 rounded hover:bg-[#39ff14]">
          Voltar
        </button>
      </div>

      <button onclick="closeModal('pixModal')" class="mt-4 text-[#8f4fff] underline">Fechar</button>
    </div>
  </div>

  <!-- Outros Modais -->
  <div id="formModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center">
    <div class="bg-[#1c1c1c] p-6 rounded-lg max-w-lg w-full text-left">
      <h3 id="formTitle" class="text-2xl font-bold text-[#8f4fff] mb-4"></h3>
      <form id="formContent"></form>
      <button onclick="closeModal('formModal')" class="mt-4 text-[#8f4fff] underline">Fechar</button>
    </div>
  </div>

  <!-- Redes Sociais Modal -->
  <div id="socialsModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center">
    <div class="bg-[#1c1c1c] p-6 rounded-lg max-w-lg w-full text-center">
      <h3 class="text-2xl font-bold text-[#8f4fff] mb-4">Siga as Sombras</h3>
      <ul class="space-y-4">
        <li class="flex items-center justify-center">
          <img src="assets/icons/instagram icon.png" alt="Instagram" class="w-6 h-6 mr-2">
          <a href="https://instagram.com/_noheroe" target="_blank" class="text-[#8f4fff] hover:underline">Instagram</a>
        </li>
        <li class="flex items-center justify-center">
          <img src="assets/icons/tiktok icon.png" alt="TikTok" class="w-6 h-6 mr-2">
          <a href="https://tiktok.com/@_noheroe" target="_blank" class="text-[#8f4fff] hover:underline">TikTok</a>
        </li>
      </ul>
      <button onclick="closeModal('socialsModal')" class="mt-4 text-[#8f4fff] underline">Fechar</button>
    </div>
  </div>

  <!-- RODAPÉ -->
  <footer class="mt-20 text-sm text-[#777]">
    <p>© 2025 NoHeroes. Todos os direitos reservados.</p>
    <p class="italic">Explore. Escolha. Caia. Evolua.</p>
  </footer>

  <!-- SCRIPTS -->
  <script>
    // Funções Pix
    function openPixModal() {
      document.getElementById('pixModal').classList.remove('hidden');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.add('hidden');
    }

    function resetPixPage() {
      document.getElementById("thankYouContainer").classList.add("hidden");
      document.getElementById("pixFormContainer").classList.remove("hidden");
      document.getElementById("pixQRCodeContainer").classList.add("hidden");
      document.getElementById("pixForm").reset();
      document.getElementById("loadingSpinner").classList.add("hidden");
    }

    function generatePixPayload(valor) {
      const chavePix = "azuosraul999@gmail.com";
      const nomeRecebedor = "Raul Souza Silva";
      const cidade = "Cananéia";
      const valorFormatado = valor.toFixed(2);

      const payload = [
        "000201",
        "26330014br.gov.bcb.pix",
        `0114${chavePix}`,
        "52040000",
        "5303986",
        `540${valorFormatado.length}${valorFormatado}`,
        "5802BR",
        `59${nomeRecebedor.length}${nomeRecebedor}`,
        `60${cidade.length}${cidade}`,
      ].join("");

      const crc16 = generateCRC16(payload + "6304");
      return `${payload}6304${crc16}`;
    }

    function generateCRC16(payload) {
      let crc = 0xFFFF;
      const polinomio = 0x1021;

      for (let i = 0; i < payload.length; i++) {
        const byte = payload.charCodeAt(i);
        crc ^= (byte << 8);
        for (let j = 0; j < 8; j++) {
          if ((crc & 0x8000) !== 0) {
            crc = (crc << 1) ^ polinomio;
          } else {
            crc = (crc << 1);
          }
        }
      }

      return (crc & 0xFFFF).toString(16).toUpperCase().padStart(4, "0");
    }

    function generateQRCode(event) {
      event.preventDefault();

      const valor = parseFloat(document.getElementById("pixValor").value);
      if (isNaN(valor) || valor < 0.01) {
        alert("Por favor, insira um valor válido (mínimo de R$ 0,01).");
        return;
      }

      const payload = generatePixPayload(valor);
      const qrCodeContainer = document.getElementById("pixQRCode");

      document.getElementById("loadingSpinner").classList.remove("hidden");
      qrCodeContainer.innerHTML = "";

      QRCode.toCanvas(qrCodeContainer, payload, { width: 256 }, function (error) {
        document.getElementById("loadingSpinner").classList.add("hidden");

        if (error) {
          console.error("Erro ao gerar o QR Code:", error);
          alert("Erro ao gerar o QR Code. Por favor, tente novamente.");
          return;
        }

        document.getElementById("pixFormContainer").classList.add("hidden");
        document.getElementById("pixQRCodeContainer").classList.remove("hidden");
      });
    }

    function confirmPayment() {
      document.getElementById("pixQRCodeContainer").classList.add("hidden");
      document.getElementById("thankYouContainer").classList.remove("hidden");
    }
  </script>
</body>
</html>