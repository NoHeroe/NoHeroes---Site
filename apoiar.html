<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Apoiar — NoHeroes</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<style>
  :root{
    --nh-bg:#0a0a0a; --nh-fg:#e5e5e5; --nh-muted:#bdbdbd;
    --grad: linear-gradient(135deg,#8f4fff 0%,#facc15 100%);
    --border: rgba(255,255,255,.1);
    --glass: rgba(255,255,255,.04);
    --radius:16px;
    --reveal-duration: 1000ms;
  }
  body{font-family:Inter,system-ui,Arial,sans-serif; background:var(--nh-bg); color:var(--nh-fg); overflow-x:hidden}
  h1,h2,h3,.cinzel{font-family:"Cinzel Decorative",serif}
  .grad-text{background:var(--grad); -webkit-background-clip:text; background-clip:text; color:transparent}
  .card{background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); backdrop-filter: blur(10px)}
  .btn{display:inline-flex; align-items:center; justify-content:center; gap:.6rem; padding:.9rem 1.2rem; border-radius:999px; border:1px solid var(--border); background:rgba(255,255,255,.05); transition:.25s; font-weight:600}
  .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.08)}
  .btn-primary{background:var(--grad); color:#000; border:none}
  .btn-primary:hover{filter:saturate(1.05); transform:translateY(-1px) scale(1.01)}
  .btn-ghost{background:rgba(255,255,255,.04)}
  .kpi{display:flex; gap:.75rem; align-items:center}
  .kpi .dot{width:.6rem; height:.6rem; border-radius:999px; background:linear-gradient(135deg,#8f4fff,#facc15)}
  .progress{height:.6rem; border-radius:999px; background:#1a1a1a; border:1px solid var(--border); overflow:hidden}
  .progress > span{display:block; height:100%; background:var(--grad)}
  /* Cinematic reveal */
  .reveal{opacity:0; transform: translateY(18px) scale(.985); filter:blur(6px); will-change:opacity,transform,filter}
  .reveal.in{animation:cinematic var(--reveal-duration) cubic-bezier(.22,.61,.36,1) var(--reveal-delay,0ms) both}
  @keyframes cinematic{
    0%{opacity:0; transform:translateY(18px) scale(.985); filter:blur(6px)}
    60%{opacity:1; transform:translateY(0) scale(1); filter:blur(.8px)}
    100%{opacity:1; transform:translateY(0) scale(1); filter:blur(0)}
  }
  @media (prefers-reduced-motion: reduce){ .reveal{opacity:1; transform:none; filter:none} .reveal.in{animation:none} }
  /* Overlay/modal */
  .overlay{position:fixed; inset:0; background:rgba(0,0,0,.7); display:none; align-items:center; justify-content:center; z-index:60}
  .overlay.show{display:flex}
  .modal{background:#151515; border:1px solid var(--border); border-radius:18px; width:min(640px,92vw); padding:1.2rem}
  .field{display:grid; gap:.4rem}
  .input{background:#0e0e0e; border:1px solid var(--border); border-radius:10px; padding:.7rem .8rem; color:var(--nh-fg)}
  /* Header bar from original (kept) */
  .topbar{position:fixed; top:0; left:0; right:0; height:56px; background:#0a0a0a; border-bottom:1px solid #2e2e2e; z-index:50}
  .logo-wrap{position:absolute; left:50%; top:100%; transform:translate(-50%,-50%); z-index:30}
  .bar-grad{position:fixed; top:56px; left:0; right:0; height:4px; background:linear-gradient(90deg,#8f4fff,#facc15); box-shadow:0 0 6px #8f4fff88,0 0 10px #facc1588; z-index:40}
  /* Drawer (kept minimal) */
  #drawer{position:fixed; top:0; right:0; width:18rem; height:100%; background:#000; color:#fff; transform:translateX(100%); transition:transform .3s; z-index:55; border-left:1px solid #212121}
  #drawer.show{transform:translateX(0)}
  #drawerOverlay{position:fixed; inset:0; background:rgba(0,0,0,.6); display:none; z-index:54}
  #drawerOverlay.show{display:block}
  /* Canvas brasas (kept) */
  #brasasCanvas{position:fixed; inset:0; width:100vw; height:100vh; z-index:-1; pointer-events:none}
  /* Mobile safe */
  html,body,main{max-width:100vw; overflow-x:hidden}
</style>
</head>
<body>
  <!-- BACKGROUND (brasas) -->
  <canvas id="brasasCanvas" aria-hidden="true"></canvas>

  <!-- HEADER (mantido) -->
  <header class="topbar">
    <button id="hamburgerBtn" class="absolute top-2.5 right-4 text-2xl text-white/90 hover:text-[#a855f7]">☰</button>
    <div class="logo-wrap">
      <!-- Substitua o src abaixo pelo seu logo -->
      <a href="index.html" aria-label="NoHeroes">
        <img src="assets/images/noheroes logo.png" alt="NoHeroes" class="h-24" />
      </a>
    </div>
  </header>
  <div class="bar-grad" aria-hidden="true"></div>

  <!-- DRAWER (mantido, simples) -->
  <aside id="drawer" role="dialog" aria-modal="true" aria-label="Menu">
    <button id="drawerClose" class="absolute top-3 right-4 text-2xl">✕</button>
    <nav class="p-6 grid gap-2 text-sm mt-10">
      <a href="index.html" class="py-2 px-3 rounded hover:bg-[#151515]">Início</a>
      <a href="projects.html" class="py-2 px-3 rounded hover:bg-[#151515]">Projetos</a>
      <a href="sobre.html" class="py-2 px-3 rounded hover:bg-[#151515]">Sobre</a>
      <a href="shop.html" class="py-2 px-3 rounded hover:bg-[#151515]">Loja</a>
      <a href="oraculum.html" class="py-2 px-3 rounded hover:bg-[#151515]">Oráculo</a>
    </nav>
  </aside>
  <div id="drawerOverlay" aria-hidden="true"></div>

  <!-- CONTEÚDO -->
  <main class="max-w-3xl mx-auto px-4 pt-40 pb-24 relative z-10">
    <!-- Copy (pode ajustar texto se quiser) -->
    <h1 class="cinzel text-3xl sm:text-4xl grad-text reveal">Apoie o Universo NoHeroes</h1>
    <p class="mt-3 text-white/70 leading-relaxed reveal" style="--reveal-delay:90ms">
      Cada contribuição mantém o coração do universo batendo e acelera novas criações. Simples, transparente e digno da sua confiança.
    </p>

    <!-- KPIs/Metas compactas -->
    <section class="mt-8 grid gap-4 sm:grid-cols-2">
      <!-- Meta geral -->
      <article class="card p-4 reveal">
        <div class="kpi">
          <span class="dot" aria-hidden="true"></span>
          <h2 class="cinzel text-lg">Meta Geral — NoHeroes</h2>
        </div>
        <div class="mt-3 flex items-end justify-between">
          <div>
            <div class="text-sm text-white/60">Arrecadado</div>
            <div class="text-xl font-semibold"><span id="mGeralValor">R$ 0,00</span></div>
          </div>
          <div class="text-right">
            <div class="text-sm text-white/60">Meta</div>
            <div class="text-xl font-semibold" id="mGeralMeta">R$ 500.000,00</div>
          </div>
        </div>
        <div class="mt-3 progress" aria-label="Progresso meta geral">
          <span id="mGeralBar" style="width:0%"></span>
        </div>
        <div class="mt-1 text-xs text-white/50"><span id="mGeralPerc">0%</span> concluído</div>
      </article>

      <!-- Meta servidor -->
      <article class="card p-4 reveal" style="--reveal-delay:120ms">
        <div class="kpi">
          <span class="dot" aria-hidden="true"></span>
          <h2 class="cinzel text-lg">Meta — Servidor do Universo</h2>
        </div>
        <div class="mt-3 flex items-end justify-between">
          <div>
            <div class="text-sm text-white/60">Arrecadado</div>
            <div class="text-xl font-semibold"><span id="mServValor">R$ 0,00</span></div>
          </div>
          <div class="text-right">
            <div class="text-sm text-white/60">Meta</div>
            <div class="text-xl font-semibold" id="mServMeta">R$ 12.000,00</div>
          </div>
        </div>
        <div class="mt-3 progress" aria-label="Progresso meta servidor">
          <span id="mServBar" style="width:0%"></span>
        </div>
        <div class="mt-1 text-xs text-white/50"><span id="mServPerc">0%</span> concluído</div>
      </article>
    </section>

    <!-- Ações principais -->
    <section class="mt-10 grid gap-3 sm:grid-cols-2 reveal" style="--reveal-delay:140ms">
      <button id="btnContribuir" class="btn btn-primary w-full">Contribuir / Doar</button>
      <button id="btnSolicitar" class="btn btn-ghost w-full">Pedir serviço / ajuda</button>
    </section>

    <!-- Form captar e-mail (clean) -->
    <section class="mt-10 card p-4 reveal" style="--reveal-delay:160ms">
      <h3 class="cinzel text-lg">Receba novidades e metas</h3>
      <form id="formLead" class="mt-3 grid gap-3 sm:grid-cols-2" autocomplete="on">
        <input class="input" name="nome" placeholder="Seu nome" required />
        <input class="input" type="email" name="email" placeholder="Seu e-mail" required />
        <button class="btn btn-primary sm:col-span-2" type="submit">Assinar</button>
      </form>
      <p class="mt-2 text-xs text-white/50">Armazenamento local habilitado. Integração com backend pronta no código (comentários).</p>
    </section>
  </main>

  <!-- MODAL: Contribuir -->
  <div id="modalContribuir" class="overlay" role="dialog" aria-modal="true" aria-label="Contribuir">
    <div class="modal">
      <h3 class="cinzel text-xl grad-text">Contribuir</h3>
      <form id="formDoacao" class="mt-3 grid gap-3">
        <div class="field">
          <label class="text-sm text-white/70">Valor (R$)</label>
          <input class="input" type="number" min="1" step="0.01" name="valor" placeholder="Ex.: 25.00" required />
        </div>
        <div class="field">
          <label class="text-sm text-white/70">Destino</label>
          <select class="input" name="destino">
            <option value="geral">Meta Geral — NoHeroes</option>
            <option value="servidor">Servidor do Universo</option>
          </select>
        </div>
        <div class="grid gap-2 sm:grid-cols-3">
          <button class="btn btn-primary" type="button" id="payPix">PIX</button>
          <button class="btn btn-ghost" type="button" id="payMP">Mercado Pago</button>
          <button class="btn btn-ghost" type="button" id="payKofi">Ko-fi</button>
        </div>
        <div class="text-xs text-white/50">Ao finalizar, o valor é somado ao progresso local e pode ser conciliado depois via webhook.</div>
      </form>
      <div class="mt-3 flex justify-end gap-2">
        <button class="btn" data-close>Fechar</button>
      </div>
    </div>
  </div>

  <!-- MODAL: PIX -->
  <div id="modalPix" class="overlay" role="dialog" aria-modal="true" aria-label="PIX">
    <div class="modal">
      <h3 class="cinzel text-xl grad-text">PIX</h3>
      <p class="text-white/70 text-sm">Escaneie o QR ou copie a chave.</p>
      <div class="mt-3 grid gap-3 place-items-center">
        <!-- Substitua a imagem pelo seu QR -->
        <img src="assets/images/qr-code.png" alt="QR Code PIX" class="w-48 h-48 object-contain rounded-lg border border-[--border]" />
        <div class="w-full grid gap-2">
          <input id="pixKey" class="input" readonly value="azuosraul999@gmail.com" />
          <button class="btn btn-primary" id="copyPix">Copiar chave</button>
        </div>
      </div>
      <div class="mt-3 flex justify-end gap-2">
        <button class="btn" data-close>Fechar</button>
        <button class="btn btn-primary" id="pixConfirm">Já contribuí</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Mercado Pago (link) -->
  <div id="modalMP" class="overlay" role="dialog" aria-modal="true" aria-label="Mercado Pago">
    <div class="modal">
      <h3 class="cinzel text-xl grad-text">Mercado Pago</h3>
      <p class="text-white/70 text-sm">Abriremos o checkout em outra aba.</p>
      <div class="mt-3">
        <!-- Troque o href pelo seu preference_id/URL -->
        <a id="mpLink" class="btn btn-primary w-full" target="_blank" rel="noopener"
           href="https://www.mercadopago.com.br/checkout/v1/redirect?pref_id=SUA_PREFERENCE_ID">Ir para o checkout</a>
      </div>
      <div class="mt-3 flex justify-end gap-2">
        <button class="btn" data-close>Fechar</button>
        <button class="btn btn-primary" id="mpConfirm">Já contribuí</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Ko-fi (link) -->
  <div id="modalKofi" class="overlay" role="dialog" aria-modal="true" aria-label="Ko-fi">
    <div class="modal">
      <h3 class="cinzel text-xl grad-text">Ko-fi</h3>
      <p class="text-white/70 text-sm">Abriremos sua página Ko-fi em outra aba.</p>
      <div class="mt-3">
        <!-- Troque o username -->
        <a id="kofiLink" class="btn btn-primary w-full" target="_blank" rel="noopener"
           href="https://ko-fi.com/NoHeroes">Ir para Ko-fi</a>
      </div>
      <div class="mt-3 flex justify-end gap-2">
        <button class="btn" data-close>Fechar</button>
        <button class="btn btn-primary" id="kofiConfirm">Já contribuí</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Solicitar serviço/ajuda -->
  <div id="modalSolicitar" class="overlay" role="dialog" aria-modal="true" aria-label="Solicitar serviço/ajuda">
    <div class="modal">
      <h3 class="cinzel text-xl grad-text">Pedir serviço / ajuda</h3>
      <form id="formSolicitar" class="mt-3 grid gap-3">
        <input class="input" name="nome" placeholder="Seu nome" required />
        <input class="input" type="email" name="email" placeholder="Seu e-mail" required />
        <button class="btn btn-primary" type="submit">Enviar</button>
      </form>
      <div class="mt-3 flex justify-end">
        <button class="btn" data-close>Fechar</button>
      </div>
    </div>
  </div>

  <!-- FOOTER minimal -->
  <footer class="py-10 text-center text-white/50 text-sm">
    © <span id="year"></span> NoHeroes. Todos os direitos reservados.
  </footer>

<script>
/* ====== Drawer ====== */
const drawer = document.getElementById('drawer');
const drawerOv = document.getElementById('drawerOverlay');
const btnHam = document.getElementById('hamburgerBtn');
const btnClose = document.getElementById('drawerClose');
const toggleDrawer = (open) => {
  drawer.classList.toggle('show', open);
  drawerOv.classList.toggle('show', open);
  if(open){
    document.addEventListener('keydown', escDrawer);
    setTimeout(()=>document.addEventListener('click', outsideDrawer, {capture:true}),0);
  }else{
    document.removeEventListener('keydown', escDrawer);
    document.removeEventListener('click', outsideDrawer, {capture:true});
  }
};
const escDrawer = (e)=>{ if(e.key==='Escape') toggleDrawer(false); };
const outsideDrawer = (e)=>{ if(!drawer.contains(e.target) && e.target!==btnHam) toggleDrawer(false); };
btnHam.addEventListener('click', ()=>toggleDrawer(true));
btnClose.addEventListener('click', ()=>toggleDrawer(false));
drawerOv.addEventListener('click', ()=>toggleDrawer(false));

/* ====== Cinematic reveal ====== */
const sections = document.querySelectorAll('main, header, footer');
sections.forEach(section=>{
  const items = Array.from(section.querySelectorAll('.reveal'));
  if(!items.length) return;
  const io = new IntersectionObserver((entries,obs)=>{
    entries.forEach(e=>{
      if(!e.isIntersecting) return;
      items.forEach((el,i)=>{ el.style.setProperty('--reveal-delay', `${i*70}ms`); el.classList.add('in'); });
      obs.unobserve(e.target);
    });
  },{threshold:.14, rootMargin:'0px 0px -8% 0px'});
  io.observe(section);
});

/* ====== Brasas canvas (mantido, leve) ====== */
const canvas = document.getElementById('brasasCanvas'), ctx = canvas.getContext('2d');
const fit=()=>{ canvas.width=innerWidth; canvas.height=innerHeight; }; addEventListener('resize',fit); fit();
let parts=[];
const seed=()=>{ parts=Array.from({length:90},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:1+Math.random()*1.2,v:-.2-Math.random()*.5,a:.4+.4*Math.random()})); };
const tick=()=>{ ctx.clearRect(0,0,canvas.width,canvas.height);
  for(const p of parts){ p.y+=p.v; if(p.y<0) p.y=canvas.height;
    ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
    ctx.fillStyle=`rgba(168,85,247,${p.a})`; ctx.shadowColor="#a855f7"; ctx.shadowBlur=10; ctx.fill(); }
  requestAnimationFrame(tick);
};
seed(); tick();

/* ====== Estado metas / armazenamento local ====== */
const fmtBRL = (v)=> v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
const state = JSON.parse(localStorage.getItem('nh_donations')||'{"geral":0,"servidor":0,"leads":[]}');
const metas = {geral: 500000, servidor: 12000};
function renderMetas(){
  const geral = state.geral||0, serv= state.servidor||0;
  // Geral
  document.getElementById('mGeralValor').textContent = fmtBRL(geral);
  document.getElementById('mGeralMeta').textContent = fmtBRL(metas.geral);
  const p1 = Math.min(100, Math.round(geral/metas.geral*100))||0;
  document.getElementById('mGeralBar').style.width = p1+'%';
  document.getElementById('mGeralPerc').textContent = p1+'%';
  // Servidor
  document.getElementById('mServValor').textContent = fmtBRL(serv);
  document.getElementById('mServMeta').textContent = fmtBRL(metas.servidor);
  const p2 = Math.min(100, Math.round(serv/metas.servidor*100))||0;
  document.getElementById('mServBar').style.width = p2+'%';
  document.getElementById('mServPerc').textContent = p2+'%';
}
renderMetas();

/* ====== Modais util ====== */
const overlays = document.querySelectorAll('.overlay');
function openModal(id){ document.getElementById(id).classList.add('show'); document.getElementById(id).classList.add('show'); document.getElementById(id).classList.add('show'); }
function show(id){ document.getElementById(id).classList.add('show'); }
function hide(id){ document.getElementById(id).classList.remove('show'); }
document.querySelectorAll('.overlay [data-close]').forEach(b=> b.addEventListener('click', e=> e.currentTarget.closest('.overlay').classList.remove('show')));
// Clique fora fecha
overlays.forEach(ov=> ov.addEventListener('click', (e)=>{ if(e.target===ov) ov.classList.remove('show'); }));
// Esc fecha
addEventListener('keydown', (e)=>{ if(e.key==='Escape') overlays.forEach(ov=> ov.classList.remove('show')); });

/* ====== Botões principais ====== */
const btnContribuir = document.getElementById('btnContribuir');
const btnSolicitar = document.getElementById('btnSolicitar');
btnContribuir.addEventListener('click', ()=> document.getElementById('modalContribuir').classList.add('show'));
btnSolicitar.addEventListener('click', ()=> document.getElementById('modalSolicitar').classList.add('show'));

/* ====== Pagamentos ====== */
let pendingDonation = {valor:0, destino:'geral'};
document.getElementById('formDoacao').addEventListener('input', (e)=>{
  const f = new FormData(e.currentTarget);
  pendingDonation.valor = Number(f.get('valor')||0);
  pendingDonation.destino = f.get('destino')||'geral';
});
document.getElementById('payPix').addEventListener('click', ()=>{
  if(!pendingDonation.valor){ alert('Informe um valor.'); return; }
  document.getElementById('modalPix').classList.add('show');
});
document.getElementById('payMP').addEventListener('click', ()=>{
  if(!pendingDonation.valor){ alert('Informe um valor.'); return; }
  document.getElementById('modalMP').classList.add('show');
  // Dica: crie preference_id no backend e injete a URL aqui
});
document.getElementById('payKofi').addEventListener('click', ()=>{
  if(!pendingDonation.valor){ alert('Informe um valor.'); return; }
  document.getElementById('modalKofi').classList.add('show');
});
// PIX helpers
document.getElementById('copyPix').addEventListener('click', ()=>{
  const el = document.getElementById('pixKey');
  el.select(); el.setSelectionRange(0,99999);
  document.execCommand('copy');
  alert('Chave PIX copiada.');
});
// Confirmadores (incrementam contagem local)
function confirmDonation(){
  if(!pendingDonation.valor) return;
  state[pendingDonation.destino] = (state[pendingDonation.destino]||0) + pendingDonation.valor;
  localStorage.setItem('nh_donations', JSON.stringify(state));
  renderMetas();
  overlays.forEach(ov=> ov.classList.remove('show'));
  alert('Obrigado pelo apoio! (Contagem atualizada localmente)');
}
document.getElementById('pixConfirm').addEventListener('click', confirmDonation);
document.getElementById('mpConfirm').addEventListener('click', confirmDonation);
document.getElementById('kofiConfirm').addEventListener('click', confirmDonation);

/* ====== Leads (nome+email) ====== */
document.getElementById('formLead').addEventListener('submit', (e)=>{
  e.preventDefault();
  const f = new FormData(e.currentTarget);
  const lead = {nome: f.get('nome'), email: f.get('email'), ts: Date.now()};
  state.leads.push(lead);
  localStorage.setItem('nh_donations', JSON.stringify(state));
  e.currentTarget.reset();
  alert('Cadastrado com sucesso!');
  // BACKEND (opcional): POST /leads
  // fetch('/leads',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(lead)});
});

/* ====== Form solicitar serviço/ajuda ====== */
document.getElementById('formSolicitar').addEventListener('submit', (e)=>{
  e.preventDefault();
  const f = new FormData(e.currentTarget);
  const payload = {nome:f.get('nome'), email:f.get('email'), tipo:'solicitar', ts:Date.now()};
  // Salva junto em leads
  state.leads.push(payload);
  localStorage.setItem('nh_donations', JSON.stringify(state));
  e.currentTarget.reset();
  document.getElementById('modalSolicitar').classList.remove('show');
  alert('Recebido! Em breve entraremos em contato.');
  // BACKEND (opcional): POST /requests
  // fetch('/requests',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
});

/* ====== Util ====== */
document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>