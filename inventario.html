<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NoHeroes | Inventário</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <style>
    /* ====== NoHeroes Theme (fiel ao seu visual) ====== */
    :root{
      --dark-bg:#1a1a1a; --main-panel-bg:rgba(25,25,25,.85); --panel-border:#4a4a4a;
      --accent-purple:#9b59b6; --accent-purple-rgb:155,89,182; --text:#e0e0e0; --muted:#a0a0a0;
      --slot-bg:rgba(35,35,35,.6); --slot-border:#6b6b6b; --bar-bg:#2a2a2a;
      --bar-hp:#dc143c; --bar-mp:#4169e1; --bar-xp:#9b59b6; --glow:rgba(155,89,182,.5); --shadow:rgba(0,0,0,.6);
    }
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%;background:var(--dark-bg);color:var(--text);font-family:"Share Tech Mono",monospace;overflow-x:hidden;min-height:100vh}/* BG partículas (brasas) */
#particle-bg{position:fixed;inset:0;z-index:-1;opacity:.15}

/* HUD topo (mantido) */
.top-hud{position:fixed;top:0;left:0;right:0;z-index:1000;display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;align-items:center;background:rgba(15,15,15,.9);padding:10px 15px;border-bottom:2px solid var(--panel-border);box-shadow:0 4px 15px var(--shadow)}
.hud-group{display:flex;align-items:center;gap:10px}
.hud-bar{width:120px;height:12px;background:var(--bar-bg);border:1px solid var(--panel-border);border-radius:3px;overflow:hidden;position:relative}
.hud-fill{height:100%;width:70%;box-shadow:0 0 5px rgba(255,255,255,.2)}
.hud-fill::after{content:attr(data-value);position:absolute;right:6px;top:50%;transform:translateY(-50%);font-size:.7em;opacity:.85}
.hp{background:var(--bar-hp)} .mp{background:var(--bar-mp)} .xp{background:var(--bar-xp)}
.hud-level{font-family:"Cinzel Decorative",serif;font-weight:700;background:var(--slot-bg);border:1px solid var(--panel-border);padding:3px 8px;border-radius:5px}
.hud-currency{color:#cfae56;font-weight:700;display:flex;align-items:center;gap:6px}
.hud-action-buttons button{background:var(--slot-bg);border:1px solid var(--panel-border);color:var(--text);padding:8px 12px;border-radius:5px;cursor:pointer;font-family:"Cinzel Decorative",serif;text-transform:uppercase}
.hud-action-buttons button:hover{background:var(--accent-purple);color:#111;border-color:var(--accent-purple);box-shadow:0 0 10px var(--glow)}

/* Main */
.main{padding-top:110px;max-width:1200px;margin:20px auto;padding-left:15px;padding-right:15px}
.ui-root{background:var(--main-panel-bg);border:2px solid var(--panel-border);border-radius:10px;box-shadow:0 0 25px var(--shadow),inset 0 0 10px rgba(255,255,255,.05);padding:20px;display:flex;flex-direction:column;gap:20px}
.panel-title{font-family:"Cinzel Decorative",serif;font-size:1.5em;font-weight:700;color:var(--accent-purple);text-shadow:0 0 8px var(--glow);border-bottom:2px solid var(--panel-border);padding-bottom:10px;margin-bottom:15px;text-align:center;text-transform:uppercase}

/* Abas principais (iguais às do original) */
.tabs{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;margin-bottom:20px}
.tab{background:var(--slot-bg);border:1px solid var(--panel-border);color:#bbb;padding:6px 14px;border-radius:6px;font-family:"Cinzel Decorative",serif;font-size:.85em;cursor:pointer;text-transform:uppercase}
.tab.active{background:var(--accent-purple);color:#111;border-color:var(--accent-purple);box-shadow:0 0 12px var(--glow)}

.layout{display:flex;flex-direction:column;gap:20px}
.left,.right{flex:1;background:rgba(30,30,30,.7);border:1px solid var(--panel-border);border-radius:8px;padding:15px;box-shadow:inset 0 0 8px rgba(0,0,0,.5),0 0 10px var(--shadow)}
.center{flex:1.2;display:flex;align-items:center;justify-content:center;padding:15px;min-height:300px}

/* Avatar / slots (mantidos) */
.avatar{display:flex;align-items:center;justify-content:center;gap:10px}
.avatar-ph{width:280px;height:400px;background:linear-gradient(145deg,#2a2a2a,#1a1a1a);border:3px dashed var(--accent-purple);border-radius:10px;display:flex;align-items:center;justify-content:center;color:var(--accent-purple);font-family:"Cinzel Decorative",serif;font-size:2em}
.slot,.inv-slot{width:65px;height:65px;background:var(--slot-bg);border:2px solid var(--slot-border);border-radius:5px;display:flex;align-items:center;justify-content:center;color:#999;position:relative;cursor:pointer}
.slot:hover,.inv-slot:hover{border-color:var(--accent-purple);box-shadow:0 0 12px var(--glow)}
.item-count{position:absolute;bottom:3px;right:3px;background:rgba(0,0,0,.7);font-size:.7em;padding:1px 4px;border-radius:3px}

/* Inventário */
.inventory-filter{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;padding:10px 0;border-bottom:1px solid var(--panel-border);margin-bottom:12px}
.filter-btn{background:var(--slot-bg);border:1px solid var(--panel-border);color:#bbb;padding:6px 12px;border-radius:6px;cursor:pointer;font-family:"Cinzel Decorative",serif;font-size:.8em;text-transform:uppercase}
.filter-btn.active{background:var(--accent-purple);color:#111;border-color:var(--accent-purple);box-shadow:0 0 10px var(--glow)}
.category{margin-bottom:20px}
.category-title{font-family:"Cinzel Decorative",serif;font-size:1.1em;color:var(--accent-purple);margin-bottom:10px;border-bottom:1px dotted var(--panel-border);padding-bottom:5px;text-transform:uppercase}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:8px;max-height:300px;overflow:auto}
.empty{font-size:.85em;color:#aaa;text-align:center;margin-top:10px;font-style:italic}

/* Botões de conteúdo (fora dos filtros) */
.content-shortcuts{display:flex;gap:8px;justify-content:center;margin:8px 0 4px}
.content-shortcuts .btn{background:linear-gradient(135deg, rgba(155,89,182,.9), rgba(217,181,90,.9));color:#111;border:none;padding:8px 12px;border-radius:8px;font-weight:700;cursor:pointer}

@media(min-width:900px){.layout{flex-direction:row}}
/* Scrollbar */
::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-thumb{background:var(--panel-border);border-radius:5px}

  </style>
</head>
<body>
  <canvas id="particle-bg"></canvas>  <!-- HUD -->  <div class="top-hud">
    <div class="hud-group">
      <span class="hud-level">Nível: <span id="hud-level">3</span></span>
      <div class="hud-bar"><div id="xp" class="hud-fill xp" data-value="67%" style="width:67%"></div></div>
    </div>
    <div class="hud-group">
      <div class="hud-bar"><div id="hp" class="hud-fill hp" data-value="100/100" style="width:100%"></div></div>
      <div class="hud-bar"><div id="mp" class="hud-fill mp" data-value="50/50" style="width:100%"></div></div>
    </div>
    <div class="hud-group"><span class="hud-currency">⦿ <span id="gold">1250</span></span></div>
    <div class="hud-action-buttons"><button onclick="location.href='store.html'">⛩ Loja</button></div>
  </div>  <main class="main">
    <div class="ui-root">
      <!-- Abas principais (fieis) -->
      <div class="tabs">
        <button class="tab active" data-tab="overview">Visão Geral</button>
        <button class="tab" data-tab="inventory">Inventário</button>
        <button class="tab" data-tab="equipment">Equipamento</button>
      </div><div class="layout">
    <!-- Left -->
    <section class="left">
      <!-- OVERVIEW -->
      <div class="pane pane-overview">
        <h2 class="panel-title">Informações do Herói</h2>
        <div class="info-row" style="display:flex;justify-content:space-between;align-items:center;border-bottom:1px dashed rgba(255,255,255,.1);padding-bottom:6px;margin-bottom:8px">
          <span style="color:#a0a0a0;text-transform:uppercase">Nome:</span>
          <span id="nome">Ghoul Pionkim <button class="edit" style="padding:2px 8px" onclick="editarNome()">✎</button></span>
        </div>

        <h2 class="panel-title" style="margin-top:16px">Atributos</h2>
        <div id="attrs"></div>
      </div>

      <!-- INVENTORY -->
      <div class="pane pane-inventory" style="display:none">
        <h2 class="panel-title">Inventário</h2>
        <p style="text-align:center;color:#a0a0a0;margin-bottom:8px">Tudo o que você coletou em suas jornadas.</p>

        <!-- Botões de Conteúdo (fora dos filtros) -->
        <div class="content-shortcuts">
          <button class="btn" id="open-anime">Animes</button>
          <button class="btn" id="open-manga">Mangás</button>
          <button class="btn" id="open-ebook">eBooks</button>
        </div>

        <!-- Filtros (APENAS os do original: sem skins/chaves/passes; mentorias removido) -->
        <div class="inventory-filter">
          <button class="filter-btn active" data-filter="all">Tudo</button>
          <button class="filter-btn" data-filter="consumables">Consumíveis</button>
          <button class="filter-btn" data-filter="materials">Materiais</button>
          <button class="filter-btn" data-filter="quests">Missão</button>
          <button class="filter-btn" data-filter="misc">Diversos</button>
        </div>

        <!-- Categorias (iguais às suas, preenchidas via backend) -->
        <section class="category" data-category="consumables">
          <h3 class="category-title">Consumíveis</h3>
          <div class="grid" id="grid-consumables"></div>
          <div class="empty" id="empty-consumables" style="display:none">Sem consumíveis.</div>
        </section>

        <section class="category" data-category="materials" style="display:none">
          <h3 class="category-title">Materiais</h3>
          <div class="grid" id="grid-materials"></div>
          <div class="empty" id="empty-materials">Sem materiais.</div>
        </section>

        <section class="category" data-category="quests" style="display:none">
          <h3 class="category-title">Itens de Missão</h3>
          <div class="grid" id="grid-quests"></div>
          <div class="empty" id="empty-quests">Nenhum item de missão.</div>
        </section>

        <section class="category" data-category="misc" style="display:none">
          <h3 class="category-title">Diversos</h3>
          <div class="grid" id="grid-misc"></div>
          <div class="empty" id="empty-misc">Nada por aqui…</div>
        </section>
      </div>

      <!-- EQUIPMENT -->
      <div class="pane pane-equipment" style="display:none">
        <h2 class="panel-title">Habilidades Ativas</h2>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <div class="slot">S1</div><div class="slot">S2</div><div class="slot">S3</div><div class="slot">S4</div>
        </div>

        <h2 class="panel-title" style="margin-top:16px">Bônus Atuais</h2>
        <p style="color:#a0a0a0">+10% Dano de Sombra<br/>+5 Regeneração de MP<br/>Armadura Arcana (50% Resist. Mágica)</p>
      </div>
    </section>

    <!-- Center -->
    <section class="center">
      <div class="avatar"><div class="avatar-ph">Avatar</div></div>
    </section>

    <!-- Right -->
    <section class="right">
      <div class="pane pane-overview-right">
        <h2 class="panel-title">Jornada e Progresso</h2>
        <div class="info-row" style="display:flex;justify-content:space-between;margin-bottom:8px">
          <span style="color:#a0a0a0;text-transform:uppercase">Despertar Vitalista:</span>
          <span id="despertar">128.000 / 1.000.000</span>
        </div>
        <div style="height:12px;border:2px solid #333;background:#000;border-radius:4px;overflow:hidden">
          <div id="barra-despertar" style="width:12.8%;height:100%;background:linear-gradient(90deg, #8b0000, #daa520, #006400)"></div>
        </div>

        <h2 class="panel-title" style="margin-top:16px">Mochila</h2>
        <div id="equippedList" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:8px"></div>
      </div>

      <div class="pane pane-inventory-right" style="display:none">
        <h2 class="panel-title">Itens Equipados</h2>
        <div id="equippedCards" style="display:grid;gap:8px"></div>
      </div>

      <div class="pane pane-equipment-right" style="display:none">
        <h2 class="panel-title">Detalhes</h2>
        <p style="color:#a0a0a0">Selecione um item para ver detalhes.</p>
      </div>
    </section>
  </div>
</div>

  </main>  <script>
    // ===== Partículas =====
    const canvas=document.getElementById('particle-bg'); const ctx=canvas.getContext('2d');
    function size(){canvas.width=innerWidth; canvas.height=innerHeight} window.addEventListener('resize',size); size();
    const P=[]; for(let i=0;i<100;i++) P.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,s:.2+Math.random()*.8,a:.1+Math.random()*.4,r:.5+Math.random()*1});
    (function loop(){ctx.clearRect(0,0,canvas.width,canvas.height); P.forEach(p=>{p.y-=p.s; if(p.y<-10) p.y=canvas.height+10; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=`rgba(200,200,200,${p.a})`; ctx.fill();}); requestAnimationFrame(loop);})();

    // ===== Helpers/API =====
    const API_BASE='https://api.noheroes.com.br';
    const $=q=>document.querySelector(q); const $$=q=>Array.from(document.querySelectorAll(q));
    function getJwt(){const raw=(localStorage.getItem('token')||'').trim()||(localStorage.getItem('NoHeroes_token')||'').trim(); return raw.replace(/^Bearer\s+/i,'');}
    async function api(path,opts={}){const h={'Content-Type':'application/json'}; const t=getJwt(); if(t) h.Authorization='Bearer '+t; const r=await fetch(API_BASE+path,{...opts,headers:h}); if(!r.ok) throw new Error('HTTP '+r.status); return r.json();}

    // ===== Estado =====
    const state={items:[], filter:'all'};

    // ===== Abas =====
    const tabs=$$('.tab');
    function showTab(key){
      tabs.forEach(t=>t.classList.toggle('active', t.dataset.tab===key));
      $('.pane-overview').style.display = key==='overview'? 'block':'none';
      $('.pane-overview-right').style.display = key==='overview'? 'block':'none';
      $('.pane-inventory').style.display = key==='inventory'? 'block':'none';
      $('.pane-inventory-right').style.display = key==='inventory'? 'block':'none';
      $('.pane-equipment').style.display = key==='equipment'? 'block':'none';
      $('.pane-equipment-right').style.display = key==='equipment'? 'block':'none';
      $('.center').style.display = key==='inventory'? 'none':'flex';
    }
    tabs.forEach(t=> t.addEventListener('click',()=> showTab(t.dataset.tab)));

    // ===== Filtros =====
    const filterBtns=$$('.filter-btn');
    const cats=['consumables','materials','quests','misc'];
    function applyFilter(f){
      state.filter=f; filterBtns.forEach(b=>b.classList.toggle('active', b.dataset.filter===f));
      cats.forEach(c=>{ const el=document.querySelector(`[data-category="${c}"]`); if(!el) return; el.style.display = (f==='all' || f===c)? 'block':'none'; });
    }
    filterBtns.forEach(b=> b.addEventListener('click',()=> applyFilter(b.dataset.filter)));

    // ===== Conteúdos (atalhos) =====
    $('#open-anime').onclick = ()=> location.href = 'watch.html';
    $('#open-manga').onclick = ()=> location.href = 'manga.html';
    $('#open-ebook').onclick = ()=> location.href = 'webnovel.html';

    // ===== Render slots =====
    function slotEl(item){
      const d=document.createElement('div'); d.className='inv-slot'; d.title=item.name||item.type;
      if(item.icon){ const img=new Image(); img.src=item.icon; img.alt=''; img.style.width='70%'; img.style.height='70%'; img.style.objectFit='contain'; d.appendChild(img); }
      if(item.quantity>1){ const q=document.createElement('div'); q.className='item-count'; q.textContent=item.quantity; d.appendChild(q); }
      d.addEventListener('click',()=> openItemModal(item));
      return d;
    }
    function renderCategory(list, gridId, emptyId){
      const grid=$(gridId); const empty=$(emptyId); grid.innerHTML='';
      if(!list.length){ empty.style.display='block'; return; } else empty.style.display='none';
      list.forEach(it=> grid.appendChild(slotEl(it)));
    }

    function mapCat(it){
      // mapeia types do backend para suas categorias originais
      // consumable -> consumables, material -> materials, quest -> quests, default -> misc
      if(it.type==='consumable') return 'consumables';
      if(it.type==='material') return 'materials';
      if(it.type==='quest') return 'quests';
      return 'misc';
    }

    function renderInventory(){
      const by={consumables:[], materials:[], quests:[], misc:[]};
      state.items.forEach(it=>{ const c=mapCat(it); if(by[c]) by[c].push(it); else by.misc.push(it); });
      renderCategory(by.consumables,'#grid-consumables','#empty-consumables');
      renderCategory(by.materials,'#grid-materials','#empty-materials');
      renderCategory(by.quests,'#grid-quests','#empty-quests');
      renderCategory(by.misc,'#grid-misc','#empty-misc');
    }

    // ===== Modal (equipar/usar) =====
    function openItemModal(it){
      const wrap=document.createElement('div'); Object.assign(wrap.style,{position:'fixed',inset:0,background:'rgba(0,0,0,.6)',display:'grid',placeItems:'center',zIndex:2000});
      wrap.innerHTML=`<div style="width:min(520px,92vw);background:rgba(15,12,24,.96);border:1px solid ${getComputedStyle(document.documentElement).getPropertyValue('--panel-border')};border-radius:16px;padding:16px">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:48px;height:48px;border:1px solid var(--panel-border);border-radius:8px;background:#0f0c18;overflow:hidden">${it.icon?`<img src="${it.icon}" style="width:100%;height:100%;object-fit:cover">`:''}</div>
          <div style="min-width:0"><div style="font-weight:700">${it.name||'Item'}</div><div style="color:#a0a0a0;font-size:.9em">${it.desc||''}</div></div>
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
          ${it.equipable? (!it.equipped? `<button class="btn" id="equip" style="padding:6px 10px;border-radius:8px;background:linear-gradient(135deg, rgba(155,89,182,.9), rgba(217,181,90,.9));color:#111;border:none;font-weight:700">Equipar</button>`:`<button class="btn" id="unequip" style="padding:6px 10px;border-radius:8px;background:#333;border:1px solid var(--panel-border);color:#eee">Desequipar</button>`):''}
          ${it.usable? `<button class="btn" id="use" style="padding:6px 10px;border-radius:8px;background:linear-gradient(135deg, rgba(155,89,182,.9), rgba(217,181,90,.9));color:#111;border:none;font-weight:700">Usar</button>`:''}
          <button class="btn" id="close" style="padding:6px 10px;border-radius:8px;background:#333;border:1px solid var(--panel-border);color:#eee">Fechar</button>
        </div>
      </div>`;
      document.body.appendChild(wrap);
      wrap.querySelector('#close')?.addEventListener('click',()=>wrap.remove());
      wrap.querySelector('#equip')?.addEventListener('click',async()=>{ await equipItem(it); wrap.remove(); });
      wrap.querySelector('#unequip')?.addEventListener('click',async()=>{ await unequipItem(it); wrap.remove(); });
      wrap.querySelector('#use')?.addEventListener('click',async()=>{ await useItem(it); wrap.remove(); });
    }

    // ===== Backend actions =====
    async function equipItem(it){ try{ await api(`/me/inventory/${it.id}/equip`,{method:'POST'}); it.equipped=true; renderInventory(); loadEquipped(); }catch(e){ console.warn(e); } }
    async function unequipItem(it){ try{ await api(`/me/inventory/${it.id}/unequip`,{method:'POST'}); it.equipped=false; renderInventory(); loadEquipped(); }catch(e){ console.warn(e); } }
    async function useItem(it){ try{ const r=await api(`/me/inventory/${it.id}/use`,{method:'POST'}); if(r&&r.redirect) location.href=r.redirect; if(it.quantity>0){ it.quantity--; if(it.quantity===0){ state.items=state.items.filter(x=>x.id!==it.id);} } renderInventory(); }catch(e){ console.warn(e); } }

    function loadEquipped(){
      const box=$('#equippedList'); const cards=$('#equippedCards'); box.innerHTML=''; cards.innerHTML='';
      const eq=state.items.filter(x=>x.equipped);
      if(!eq.length){ box.innerHTML='<div class="empty">Nada equipado.</div>'; return; }
      eq.forEach(it=>{ box.appendChild(slotEl(it)); const c=document.createElement('div'); c.textContent=it.name||'Item'; c.style.color='#a0a0a0'; cards.appendChild(c); });
    }

    // ===== Bootstrap =====
    function mock(){ return [
      {id:1,type:'consumable',name:'Poção Média',desc:'Recupera 50 HP',quantity:3,usable:true},
      {id:2,type:'material',name:'Mineral Sombrio',quantity:12},
      {id:3,type:'quest',name:'Selo Antigo'},
      {id:4,type:'misc',name:'Moeda Brilhante',quantity:5}
    ]; }
    async function boot(){
      // carrega inventário
      try{ const rows=await api('/me/inventory'); state.items=Array.isArray(rows)? rows:[]; }
      catch(e){ console.warn('preview inventory'); state.items=mock(); }
      renderInventory(); loadEquipped();
      // defaults
      showTab('overview'); applyFilter('all');
    }

    document.addEventListener('DOMContentLoaded', boot);
  </script></body>
</html>