<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Projeto NoHeroes</title>
  <style>
    /* Estilos básicos */
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #121212; color: #fff; }
    .card { padding: 20px; background-color: #333; margin: 10px 0; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
    .btn { padding: 10px 20px; background-color: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .btn:hover { background-color: #2ecc71; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 1000; justify-content: center; align-items: center; }
    .modal.open { display: flex; }
    .modal-content { background-color: #222; padding: 20px; border-radius: 10px; width: 90%; max-width: 600px; }
    .close { position: absolute; top: 10px; right: 10px; background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
    .flex { display: flex; }
    .space-x-4 { gap: 10px; }
    .justify-center { justify-content: center; }
    .history-filter-btn { background-color: #444; border: 1px solid #555; color: #fff; padding: 10px; cursor: pointer; }
    .history-filter-btn:hover { background-color: #555; }
    .history-filter-btn.active { background-color: #27ae60; }
    .anchor-btn { color: #27ae60; text-decoration: none; }
    .anchor-btn:hover { text-decoration: underline; }
  </style>
</head>
<body>

  <!-- Conteúdo Principal -->
  <div class="container">
    <button class="btn open-modal" data-modal="modal-2025-04-27-melhorias-na-navegacao">Ver Atualização</button>
    <button class="btn" id="historyBtn">Histórico de Atualizações</button>

    <!-- Cards de Postagens -->
    <div class="card" data-id="1" data-category="atualizacoes">
      <h2>Nova Funcionalidade</h2>
      <p>Introduzimos uma nova forma de navegação, incluindo categorias de filtragem...</p>
      <button class="btn open-modal" data-modal="modal-1">Saiba Mais</button>
    </div>

    <!-- Modal de Atualização -->
    <div id="modal-2025-04-27-melhorias-na-navegacao" class="modal">
      <div class="modal-content">
        <button class="close" data-close="modal-2025-04-27-melhorias-na-navegacao">×</button>
        <h2>Patch 0.0.3 — Melhorias na Navegação</h2>
        <div class="meta">27/04/2025 - Atualizações</div>
        <p>Adicionamos um sistema de navegação para facilitar a busca por conteúdos. Agora, no topo da página, é possível filtrar rapidamente entre: Atualizações, Notícias e Extras.</p>
      </div>
    </div>

    <!-- Modal de Histórico -->
    <div id="historyModal" class="modal">
      <div class="modal-content">
        <button class="close" data-close="historyModal">×</button>
        <div class="flex justify-center space-x-4 mb-4">
          <button class="history-filter-btn" data-filter="atualizacoes">Atualizações</button>
          <button class="history-filter-btn" data-filter="noticias">Notícias</button>
          <button class="history-filter-btn" data-filter="comunidade">Comunidade</button>
          <button class="history-filter-btn" data-filter="extras">Extras</button>
        </div>
        <ul id="historyList" class="space-y-2">
          <!-- Será preenchido pelo JS -->
        </ul>
      </div>
    </div>

  </div>

  <script>
    // ScrollReveal (Adicione se necessário)
    ScrollReveal().reveal('.card', { distance:'50px', duration:600, interval:100, origin:'bottom' });

    // Modal open/close
    document.querySelectorAll('.open-modal').forEach(btn => btn.addEventListener('click', () => {
      const modalId = btn.dataset.modal;
      document.querySelectorAll('.modal.open').forEach(m => m.classList.remove('open'));
      document.getElementById(modalId).classList.add('open');
    }));

    document.querySelectorAll('.close').forEach(btn => btn.addEventListener('click', () => {
      const modalId = btn.dataset.close;
      document.getElementById(modalId).classList.remove('open');
    }));

    // Histórico button
    document.getElementById('historyBtn').addEventListener('click', () => {
      document.getElementById('historyModal').classList.add('open');
      populateHistoryList(currentHistoryFilter);
    });

    // Posts metadata
    const posts = Array.from(document.querySelectorAll('.card')).map(card => ({
      id: card.dataset.id,
      title: card.querySelector('h2').innerText,
      category: card.dataset.category
    }));

    let currentHistoryFilter = 'atualizacoes';

    function populateHistoryList(filter) {
      currentHistoryFilter = filter;
      const list = document.getElementById('historyList');
      list.innerHTML = '';
      posts.filter(p => p.category === filter).forEach(p => {
        const li = document.createElement('li');
        li.className = 'flex justify-between items-center';
        const btn = document.createElement('button');
        btn.className = 'text-left anchor-btn';
        btn.innerText = p.title;
        btn.addEventListener('click', () => {
          document.getElementById('historyModal').classList.remove('open');
          document.querySelector(`[data-id='${p.id}']`).scrollIntoView({behavior:'smooth'});
        });

        const more = document.createElement('button');
        more.className = 'text-[#27ae60] underline ml-4';
        more.innerText = 'Saiba mais';
        more.addEventListener('click', () => document.getElementById(`modal-${p.id}`).classList.add('open'));

        li.append(btn, more);
        list.append(li);
      });
    }

    // History filters
    document.querySelectorAll('.history-filter-btn').forEach(btn => btn.addEventListener('click', () => {
      document.querySelectorAll('.history-filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      populateHistoryList(btn.dataset.filter);
    }));
  </script>

</body>
</html>
